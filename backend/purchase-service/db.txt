DROP DATABASE IF EXISTS bd_api_python;
CREATE DATABASE bd_api_python CHARSET utf8mb4;
USE bd_api_python;

-- Tabla de compras
CREATE TABLE purchase (
    id INT AUTO_INCREMENT PRIMARY KEY,
    buyer_id INT NOT NULL,
    post_id INT NOT NULL,
    seller_confirmed_at DATETIME DEFAULT NULL,
    is_inactive BOOLEAN DEFAULT FALSE
);

-- Tabla de rese침as
CREATE TABLE review (
    id INT AUTO_INCREMENT PRIMARY KEY,
    purchase_id INT NOT NULL,
    content TEXT,
    seller_stars_amount INT NOT NULL,
    post_stars_amount INT NOT NULL,
    FOREIGN KEY (purchase_id) REFERENCES purchase(id)
);


INSERT INTO purchase (buyer_id, post_id, seller_confirmed_at, is_inactive) 
VALUES (1, 101, '2025-05-01 14:30:00', FALSE);

INSERT INTO purchase (buyer_id, post_id, seller_confirmed_at, is_inactive) 
VALUES (2, 102, '2025-05-02 10:00:00', TRUE);

INSERT INTO purchase (buyer_id, post_id, seller_confirmed_at, is_inactive) 
VALUES (3, 103, NULL, FALSE);


INSERT INTO review (purchase_id, content, seller_stars_amount, post_stars_amount)
VALUES (1, 'Todo excelente, entrega r치pida.', 5, 4);

INSERT INTO review (purchase_id, content, seller_stars_amount, post_stars_amount)
VALUES (2, 'El vendedor fue amable pero tard칩.', 3, 3);

INSERT INTO review (purchase_id, content, seller_stars_amount, post_stars_amount)
VALUES (3, 'No se concret칩 la compra.', 1, 2);


COMMIT;
